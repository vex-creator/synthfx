<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynthFX â€” Procedural Audio Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Preset Browser Sidebar -->
        <aside class="preset-browser">
            <div class="browser-header">
                <h2>Presets</h2>
                <button id="savePresetBtn" class="save-btn" title="Save Current">+ Save</button>
            </div>
            <div class="search-box">
                <input type="text" id="presetSearch" placeholder="Search presets...">
            </div>
            <div class="preset-categories" id="presetCategories">
                <!-- Categories populated by JS -->
            </div>
            <div class="custom-presets" id="customPresets">
                <div class="category-header" data-category="custom">
                    <span>ðŸ’¾ My Presets</span>
                    <span class="toggle">â–¼</span>
                </div>
                <div class="category-items" data-category="custom">
                    <!-- Custom presets populated by JS -->
                </div>
            </div>
        </aside>

        <!-- Main Editor -->
        <main class="editor">
            <header>
                <h1>SynthFX</h1>
                <p class="subtitle">Procedural Game Audio</p>
            </header>

            <div class="editor-content">
                <div class="panels-grid">
                    <!-- Oscillator Section -->
                    <section class="panel">
                        <h2>Oscillator</h2>
                        <div class="control-group">
                            <label>Wave Type <button id="previewOscBtn" class="preview-btn">ðŸ”Š Preview Raw</button></label>
                            <div class="wave-buttons">
                                <button class="wave-btn active" data-wave="sine">Sine</button>
                                <button class="wave-btn" data-wave="square">Square</button>
                                <button class="wave-btn" data-wave="sawtooth">Saw</button>
                                <button class="wave-btn" data-wave="triangle">Triangle</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>
                                <span>Start Frequency</span>
                                <span class="value" id="freqStartValue">440 Hz</span>
                            </label>
                            <input type="range" id="freqStart" min="20" max="2000" value="440" step="1">
                        </div>
                        <div class="control-group">
                            <label>
                                <span>End Frequency</span>
                                <span class="value" id="freqEndValue">110 Hz</span>
                            </label>
                            <input type="range" id="freqEnd" min="20" max="2000" value="110" step="1">
                        </div>
                        <div class="control-group">
                            <button id="previewSweepBtn" class="sweep-btn">â–¶ Preview Pitch Sweep</button>
                        </div>
                    </section>

                    <!-- Envelope Section -->
                    <section class="panel">
                        <h2>Envelope (ADSR)</h2>
                        <div class="envelope-visual">
                            <canvas id="envelopeCanvas" width="300" height="80"></canvas>
                        </div>
                        <div class="control-row">
                            <div class="control-group small">
                                <label>
                                    <span>Attack</span>
                                    <span class="value" id="attackValue">0.01s</span>
                                </label>
                                <input type="range" id="attack" min="0.001" max="1" value="0.01" step="0.001">
                            </div>
                            <div class="control-group small">
                                <label>
                                    <span>Decay</span>
                                    <span class="value" id="decayValue">0.1s</span>
                                </label>
                                <input type="range" id="decay" min="0.001" max="1" value="0.1" step="0.001">
                            </div>
                            <div class="control-group small">
                                <label>
                                    <span>Sustain</span>
                                    <span class="value" id="sustainValue">0.3</span>
                                </label>
                                <input type="range" id="sustain" min="0" max="1" value="0.3" step="0.01">
                            </div>
                            <div class="control-group small">
                                <label>
                                    <span>Release</span>
                                    <span class="value" id="releaseValue">0.2s</span>
                                </label>
                                <input type="range" id="release" min="0.001" max="2" value="0.2" step="0.001">
                            </div>
                        </div>
                    </section>

                    <!-- Filter Section -->
                    <section class="panel">
                        <h2>Filter</h2>
                        <div class="control-group">
                            <div class="wave-buttons">
                                <button class="filter-btn active" data-filter="lowpass">Low-pass</button>
                                <button class="filter-btn" data-filter="highpass">High-pass</button>
                                <button class="filter-btn" data-filter="bandpass">Band-pass</button>
                                <button class="filter-btn" data-filter="none">Off</button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label>
                                <span>Cutoff</span>
                                <span class="value" id="cutoffValue">2000 Hz</span>
                            </label>
                            <input type="range" id="cutoff" min="20" max="20000" value="2000" step="1">
                        </div>
                        <div class="control-group">
                            <label>
                                <span>Resonance</span>
                                <span class="value" id="resonanceValue">1.0</span>
                            </label>
                            <input type="range" id="resonance" min="0.1" max="20" value="1" step="0.1">
                        </div>
                    </section>

                    <!-- Noise + Master Section -->
                    <section class="panel">
                        <h2>Noise & Master</h2>
                        <div class="control-group">
                            <label>
                                <span>Noise Mix</span>
                                <span class="value" id="noiseMixValue">0%</span>
                            </label>
                            <input type="range" id="noiseMix" min="0" max="1" value="0" step="0.01">
                        </div>
                        <div class="control-group">
                            <label>
                                <span>Volume</span>
                                <span class="value" id="volumeValue">50%</span>
                            </label>
                            <input type="range" id="volume" min="0" max="1" value="0.5" step="0.01">
                        </div>
                        <div class="control-group">
                            <label>
                                <span>Duration</span>
                                <span class="value" id="durationValue">0.3s</span>
                            </label>
                            <input type="range" id="duration" min="0.05" max="2" value="0.3" step="0.01">
                        </div>
                    </section>
                </div>

                <!-- Controls -->
                <section class="controls">
                    <button id="playBtn" class="play-btn">â–¶ Play</button>
                    <button id="exportBtn" class="export-btn">ðŸ’¾ Export WAV</button>
                </section>

                <!-- Waveform Display -->
                <section class="panel waveform-panel">
                    <h2>Waveform</h2>
                    <canvas id="waveformCanvas" width="600" height="120"></canvas>
                </section>
            </div>
        </main>
    </div>

    <!-- Save Preset Modal -->
    <div class="modal" id="saveModal">
        <div class="modal-content">
            <h3>Save Preset</h3>
            <input type="text" id="presetName" placeholder="Preset name...">
            <select id="presetCategory">
                <option value="custom">My Presets</option>
            </select>
            <div class="modal-buttons">
                <button id="cancelSave" class="btn-secondary">Cancel</button>
                <button id="confirmSave" class="btn-primary">Save</button>
            </div>
        </div>
    </div>

    <script src="audio.js"></script>
    <script src="presets.js"></script>
    <script src="app.js"></script>
</body>
</html>
